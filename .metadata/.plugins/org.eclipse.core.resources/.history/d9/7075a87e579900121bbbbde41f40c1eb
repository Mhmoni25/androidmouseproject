package itt.t00154755.mouseserver;

import java.awt.AWTException;
import java.awt.MouseInfo;
import java.awt.Point;
import java.awt.Robot;

/*
 * this thread will allow the data passed from the accelerometer to control
 * the on screen cursor via the Robot object
 */
public class MouseMoveThread extends Thread {

	private int startX, startY;
	private String acceloData;

	public MouseMoveThread(int startX, int startY, String acceloData) {
		this.startX = startX;
		this.startY = startY;
		this.acceloData = acceloData;
		try {
			robot = new Robot();

			Point startLocation = MouseInfo.getPointerInfo().getLocation();
			startX = startLocation.x;
			startY = startLocation.y;
		} catch (AWTException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace();
		}
	}

	//
	Robot robot;

	@Override
	public void run() {
		if (acceloData.length() == 0 || acceloData == "") {
			System.out.println("Waiting for data");
		} else {
			int[] accData = covertStringToIntArray(acceloData);
			int currentX = startX;
			int currentY = startY;

			int xAmountPerIteration = xAmount / numberOfIterations;
			int yAmountPerIteration = yAmount / numberOfIterations;

			while (true) {
				currentX += xAmountPerIteration;
				currentY += yAmountPerIteration;

				robot.mouseMove(currentX, currentY);

				try {
					Thread.sleep(100);
				} catch (InterruptedException exc) {
					exc.printStackTrace();
				}
			}// end of loop
		}
	}
}
